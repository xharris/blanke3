(function() {
  var states, keyMap;

  states = {};
  keyMap = {
    8: 'backspace',
    9: 'tab',
    13: 'enter',
    16: 'shift',
    17: 'ctrl',
    18: 'alt',
    20: 'caps',
    27: 'esc',
    37: 'left',
    32: 'space',
    38: 'up',
    39: 'right',
    40: 'down',
    45: 'insert',
    46: 'delete'
  };

  function changeState(state) {
    return function(e) {
      var mapped;
      mapped = keyMap[e.keyCode] || String.fromCharCode(e.keyCode);
      states[mapped.toLowerCase()] = state;
    }
  }

  window.addEventListener('keydown', changeState(true));
  window.addEventListener('keyup', changeState(false));

  window.keys = states;
})();
